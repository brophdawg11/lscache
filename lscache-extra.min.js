!function(a,b){var c={"function":!0,object:!0},d=c[typeof exports]&&exports&&!exports.nodeType&&exports,e=c[typeof module]&&module&&!module.nodeType&&module,f=e&&e.exports===d&&d;"function"==typeof define&&"object"==typeof define.amd&&define.amd?(a.lscacheExtra=b(),define([],b)):d&&e?f?e.exports=b():d.lscacheExtra=b():a.lscacheExtra=b()}(this,function(){function a(){var a="__lscachetest__",b=a;if(void 0!==j)return j;try{g(a,b),f(a),j=!0}catch(c){j=!1}return j}function b(){return Math.floor((new Date).getTime()/o)}function c(a){return a+m}function d(a){var d=c(a),g=e(d);if(g){var h=parseInt(g,n);if(b()>=h)return f(a),f(d),!0}}function e(a){return localStorage.getItem(l+r+a)}function f(a){localStorage.removeItem(l+r+a)}function g(a,b){localStorage.removeItem(l+r+a),localStorage.setItem(l+r+a,b)}function h(){return void 0===k&&(k=null!=window.JSON),k}function i(a,b){s&&"console"in window&&"function"==typeof window.console.warn&&(window.console.warn("lscache - "+a),b&&window.console.warn("lscache - The error was: "+b.message))}var j,k,l="lscache-",m="-cacheexpiration",n=10,o=6e4,p="__expiry-units-key",q=Math.floor(864e13/o),r="",s=!1,t={set:function(d,j,k){if(a()){if("string"!=typeof j){if(!h())return;try{j=JSON.stringify(j)}catch(o){return}}try{g(d,j)}catch(o){if("QUOTA_EXCEEDED_ERR"!==o.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==o.name&&"QuotaExceededError"!==o.name)return void i("Could not add item with key '"+d+"'",o);for(var p,s=[],t=0;t<localStorage.length;t++)if(p=localStorage.key(t),0===p.indexOf(l+r)&&p.indexOf(m)<0){var u=p.substr((l+r).length),v=c(u),w=e(v);w=w?parseInt(w,n):q,s.push({key:u,size:(e(u)||"").length,expiration:w})}s.sort(function(a,b){return b.expiration-a.expiration});for(var x=(j||"").length;s.length&&x>0;)p=s.pop(),i("Cache is full, removing item with key '"+d+"'"),f(p.key),f(c(p.key)),x-=p.size;try{g(d,j)}catch(o){return void i("Could not add item with key '"+d+"', perhaps it's too big?",o)}}k?g(c(d),(b()+k).toString(n)):f(c(d))}},isExpired:function(d){if(!a())return null;var f=c(d),g=e(f);if(g){var h=parseInt(g,n);if(b()>=h)return!0}return!1},setExpiryUnitMs:function(a){var b=t.get(p);t.set(p,a),b!==a&&t.flush(),o=a},get:function(b,d,g){if(!a())return null;var i;if(d=d===!0,g=g===!0,t.isExpired(b)){if(!d){var j=c(b);i=e(b),f(b),f(j)}if(!g)return null}if(i||(i=e(b)),!i||!h())return i;try{return JSON.parse(i)}catch(k){return i}},remove:function(b){return a()?(f(b),void f(c(b))):null},supported:function(){return a()},flush:function(){if(a())for(var b=localStorage.length-1;b>=0;--b){var c=localStorage.key(b);0===c.indexOf(l+r)&&localStorage.removeItem(c)}},flushExpired:function(){if(a())for(var b=localStorage.length-1;b>=0;--b){var c=localStorage.key(b);d(c)}},setBucket:function(a){r=a},resetBucket:function(){r=""},enableWarnings:function(a){s=a}};return t.set(p,o),t});